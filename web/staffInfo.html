<!DOCTYPE html>
<!--[if IE 8]>
<html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]>
<html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en" class="no-js" xmlns="http://www.w3.org/1999/html"> <!--<![endif]-->
<!-- BEGIN HEAD -->
<head>
    <meta charset="utf-8"/>
    <title>员工信息 | 厂车管理系统</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta content="" name="description"/>
    <meta content="" name="author"/>
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="media/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="media/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"/>
    <link href="media/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
    <link href="media/css/style-metro.css" rel="stylesheet" type="text/css"/>
    <link href="media/css/style.css" rel="stylesheet" type="text/css"/>
    <link href="media/css/style-responsive.css" rel="stylesheet" type="text/css"/>
    <link href="media/css/default.css" rel="stylesheet" type="text/css" id="style_color"/>
    <link href="media/css/uniform.default.css" rel="stylesheet" type="text/css"/>
    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN PAGE LEVEL STYLES -->
    <link rel="stylesheet" type="text/css" href="media/css/select2_metro.css" />
    <link rel="stylesheet" href="media/css/DT_bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="media/css/bootstrap-fileupload.css" />



    <!-- END PAGE LEVEL STYLES -->

</head>
<!-- END HEAD -->

<!-- BEGIN BODY -->
<body class="page-header-fixed">
<!-- BEGIN HEADER -->
<div class="header navbar navbar-inverse navbar-fixed-top">
    <!-- BEGIN TOP NAVIGATION BAR -->
    <div class="navbar-inner">
        <div class="container-fluid">
            <!-- BEGIN LOGO -->
            <a class="brand" href="index.html">
                <img src="media/image/logo.png" alt="logo"/>
            </a>
            <!-- END LOGO -->

            <!-- BEGIN RESPONSIVE MENU TOGGLER -->
            <a href="javascript:;" class="btn-navbar collapsed" data-toggle="collapse" data-target=".nav-collapse">
                <img src="media/image/menu-toggler.png" alt=""/>
            </a>
            <!-- END RESPONSIVE MENU TOGGLER -->

            <!-- BEGIN TOP NAVIGATION MENU -->
            <ul class="nav pull-right">
                <!-- BEGIN TODO DROPDOWN -->
                <li class="dropdown" id="header_task_bar">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <i class="icon-tasks"></i>
                        <span class="badge">3</span>
                    </a>
                    <ul class="dropdown-menu extended tasks">
                        <li>
                            <p>您有 3 个待办事项</p>
                        </li>
                        <li>
                            <a href="#">
                                        <span class="task">
                                        <span class="desc">更新车辆信息</span>
                                        <span class="percent">40%</span>
                                        </span>
                                        <span class="progress progress-success ">
                                        <span style="width: 40%;" class="bar"></span>
                                        </span>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                    <span class="task">
                                    <span class="desc">审核班车乘坐申请</span>
                                    <span class="percent">65%</span>
                                    </span>
                                    <span class="progress progress-danger progress-striped active">
                                    <span style="width: 65%;" class="bar"></span>
                                    </span>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                    <span class="task">
                                    <span class="desc">更新下周排班信息</span>
                                    <span class="percent">10%</span>
                                    </span>
                                    <span class="progress progress-warning progress-striped">
                                    <span style="width: 10%;" class="bar"></span>
                                    </span>
                            </a>
                        </li>
                        <li class="external">
                            <a href="#">查看所有待办事项 <i class="m-icon-swapright"></i></a>
                        </li>
                    </ul>
                </li>
                <!-- END TODO DROPDOWN -->

                <!-- BEGIN INBOX DROPDOWN -->
                <li class="dropdown" id="header_inbox_bar">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <i class="icon-envelope"></i>
                        <span class="badge">12</span>
                    </a>
                    <ul class="dropdown-menu extended inbox">
                        <li>
                            <p>您有12条未读消息</p>
                        </li>
                        <li>
                            <a href="inbox.html?a=view">
                                <span class="photo"><img src="media/image/avatar2.jpg" alt=""/></span>
                                        <span class="subject">
                                        <span class="from">xxx</span>
                                        <span class="time">刚刚</span>
                                        </span>
                                        <span class="message">
                                        Vivamus sed auctor nibh congue nibh. auctor nibh
                                        auctor nibh...
                                        </span>
                            </a>
                        </li>
                        <li>
                            <a href="inbox.html?a=view">
                                <span class="photo"><img src="./media/image/avatar3.jpg" alt=""/></span>
                                    <span class="subject">
                                    <span class="from">xxx</span>
                                    <span class="time">16 分钟以前</span>
                                    </span>
                                    <span class="message">
                                    Vivamus sed congue nibh auctor nibh congue nibh. auctor nibh
                                    auctor nibh...
                                    </span>
                            </a>
                        </li>
                        <li>
                            <a href="inbox.html?a=view">
                                <span class="photo"><img src="./media/image/avatar1.jpg" alt=""/></span>
                                    <span class="subject">
                                    <span class="from">xxx</span>
                                    <span class="time">2 小时以前</span>
                                    </span>
                                    <span class="message">
                                    Vivamus sed nibh auctor nibh congue nibh. auctor nibh
                                    auctor nibh...
                                    </span>
                            </a>
                        </li>
                        <li class="external">
                            <a href="inbox.html">查看所有消息 <i class="m-icon-swapright"></i></a>
                        </li>
                    </ul>
                </li>
                <!-- END INBOX DROPDOWN -->

                <!-- BEGIN USER LOGIN DROPDOWN -->
                <li class="dropdown user">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <img alt="" src="media/image/avatar1_small.jpg"/>
                        <span class="username">某某某（管理员）</span>
                        <i class="icon-angle-down"></i>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="userProfile.html"><i class="icon-user"></i> 个人资料</a></li>
                        <li><a href="page_calendar.html"><i class="icon-calendar"></i> 我的日程</a></li>
                        <li><a href="inbox.html"><i class="icon-envelope"></i> 我的消息 (12)</a></li>
                        <li><a href="#"><i class="icon-tasks"></i> 待办事项 (3)</a></li>
                        <li class="divider"></li>
                        <li><a href="extra_lock.html"><i class="icon-lock"></i> 锁屏</a></li>
                        <li><a href="login.html"><i class="icon-power-off"></i> 注销</a></li>
                    </ul>
                </li>
                <!-- END USER LOGIN DROPDOWN -->
            </ul>
            <!-- END TOP NAVIGATION MENU -->
        </div>
    </div>
    <!-- END TOP NAVIGATION BAR -->
</div>
<!-- END HEADER -->

<!-- BEGIN CONTAINER -->
<div class="page-container">
    <!-- BEGIN SIDEBAR -->
    <div class="page-sidebar nav-collapse collapse">
        <!-- BEGIN SIDEBAR MENU -->
        <ul class="page-sidebar-menu">
            <li>
                <!-- BEGIN SIDEBAR TOGGLER BUTTON -->
                <div class="sidebar-toggler hidden-phone"></div>
                <!-- BEGIN SIDEBAR TOGGLER BUTTON -->
            </li>
            <li class="start ">
                <a href="index.html">
                    <i class="icon-home"></i>
                    <span class="title">线路规划</span>
                    <span class="selected"></span>
                </a>
            </li>
            <li class="start ">
                <a href="realTime.html">
                    <i class="icon-truck"></i>
                    <span class="title">运行状态</span>
                    <span class="selected"></span>
                </a>
            </li>
            <li class="">
                <a href="javascript:;">
                    <i class="icon-bookmark-empty"></i>
                    <span class="title">数据查询</span>
                    <span class="arrow "></span>
                </a>
                <ul class="sub-menu">
                    <li>
                        <a href="stationInfo.html">
                            所有站点</a>
                    </li>
                    <li>
                        <a href="rideList.html">
                            乘车名单</a>
                    </li>
                    <li>
                        <a href="reportForm.html">
                            报表</a>
                    </li>
                </ul>
            </li>
            <li class="">
                <a href="javascript:;">
                    <i class="icon-cogs"></i>
                    <span class="title active">信息管理</span>
                    <span class="arrow "></span>
                </a>
                <ul class="sub-menu active">
                    <li>
                        <a href="staffInfo.html" class='active'>
                            员工</a>
                    </li>
                    <li>
                        <a href="carInfo.html">
                            车辆</a></li>
                    <li>
                        <a href="driverSchedule.html">
                            司机排班</a>
                    </li>
                </ul>
            </li>
            <li class="">
                <a href="javascript:;">
                    <i class=" icon-star"></i>
                    <span class="title">系统管理</span>
                    <span class="arrow "></span>
                </a>
                <ul class="sub-menu">
                    <li>
                        <a href="javascript:;">
                            角色管理
                            <span class="arrow"></span>
                        </a>
                        <ul class="sub-menu">
                            <li><a href="role_create.html"><i class="icon-file-text-alt"></i> 创建角色</a></li>
                            <li><a href="role_edit.html"><i class="icon-key"></i> 更改角色</a></li>
                        </ul>
                    </li>

                    <li class="">
                        <a href="authorityMng.html">
                            权限管理</a></li>
                    <li>
                        <a href="register.html">
                            创建用户</a>
                    </li>
                </ul>
            </li>
            <li class="">
                <a href="javascript:;">
                    <i class="icon-user"></i>
                    <span class="title">个人中心</span>
                    <span class="arrow "></span>
                </a>
                <ul class="sub-menu">
                    <li>
                        <a href="javascript:;">
                            个人账户
                            <span class="arrow"></span>
                        </a>
                        <ul class="sub-menu">
                            <li><a href="userProfile.html"><i class="icon-file-text-alt"></i> 个人资料</a></li>
                            <li><a href="changePsw.html"><i class="icon-key"></i> 更换密码</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="javascript:;">
                            我的日程
                            <span class="arrow"></span>
                        </a>
                        <ul class="sub-menu">
                            <li><a href="#"><i class="icon-bell"></i> 待办事项</a></li>
                            <li><a href="#"><i class="icon-calendar"></i> 全部日程</a></li>
                            <li><a href="#"><i class="icon-plus-sign"></i> 新建任务</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="javascript:;">
                            消息中心
                            <span class="arrow"></span>
                        </a>
                        <ul class="sub-menu">
                            <li><a href="#"><i class="icon-envelope"></i> 未读消息</a></li>
                            <li>
                                <a href="javascript:;">
                                    <i class="icon-file"></i>
                                    申请与建议
                                    <span class="arrow"></span>
                                </a>
                                <ul class="sub-menu">
                                    <li><a href="#">乘坐申请</a></li>
                                    <li><a href="#">调班申请</a></li>
                                    <li><a href="#">我的建议</a></li>
                                    <li><a href="#">其它</a></li>
                                </ul>
                            </li>
                            <li><a href="#"><i class="icon-mail-forward"></i> 收件箱</a></li>
                            <li><a href="#"><i class="icon-mail-reply"></i> 发件箱</a></li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li class="last">
                <a href="news.html">
                    <i class="icon-bar-chart"></i>
                    <span class="title">公司动态</span>
                </a>
            </li>
        </ul>
        <!-- END SIDEBAR MENU -->
    </div>
    <!-- END SIDEBAR -->

    <!-- BEGIN PAGE -->
    <div class="page-content">
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span12">
                    <!-- BEGIN STYLE CUSTOMIZER -->
                    <div class="color-panel hidden-phone">
                        <div class="color-mode-icons icon-color"></div>
                        <div class="color-mode-icons icon-color-close" style="display: none;"></div>
                        <div class="color-mode" style="display: none;">
                            <p>主题颜色</p>
                            <ul class="inline">
                                <li class="color-black current color-default" data-style="default"></li>
                                <li class="color-blue" data-style="blue"></li>
                                <li class="color-brown" data-style="brown"></li>
                                <li class="color-purple" data-style="purple"></li>
                                <li class="color-grey" data-style="grey"></li>
                                <li class="color-white color-light" data-style="light"></li>
                            </ul>
                            <label>
                                <span>布局</span>
                                <select class="layout-option m-wrap small">
                                    <option value="fluid" selected="">填充</option>
                                    <option value="boxed">居中</option>
                                </select>
                            </label>
                            <label>
                                <span>页眉</span>
                                <select class="header-option m-wrap small">
                                    <option value="fixed" selected="">固定</option>
                                    <option value="default">默认</option>
                                </select>
                            </label>
                            <label>
                                <span>侧边栏</span>
                                <select class="sidebar-option m-wrap small">
                                    <option value="fixed">固定</option>
                                    <option value="default" selected="">默认</option>
                                </select>
                            </label>
                            <label>
                                <span>页脚</span>
                                <select class="footer-option m-wrap small">
                                    <option value="fixed">固定</option>
                                    <option value="default" selected="">默认</option>
                                </select>
                            </label>
                        </div>
                    </div>
                    <h3 class="page-title">
                        员工
                    </h3>
                    <ul class="breadcrumb">
                        <li>
                            <i class="icon-home"></i>
                            <a href="index.html">首页</a>
                            <i class="icon-angle-right"></i>
                        </li>
                        <li>
                            <a href="#">信息管理</a>
                            <i class="icon-angle-right"></i>
                        </li>
                        <li><a href="#">员工</a></li>
                    </ul>
                    <!-- END PAGE TITLE & BREADCRUMB-->
                </div>
            </div>
            <!--开始内容-->
            <div id="waiting" class="modal hide fade" style="width: 800px;" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-header">
                    <h3 id="myModalLabel">
                        数据导入中...
                    </h3>
                </div>
                <div class="modal-body">
                    <div id='waitProgress' class="progress progress-striped progress-success active">
                        <div id='waitBar' class="bar" style="width: 0;"></div>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    <!-- BEGIN EXAMPLE TABLE PORTLET-->
                    <div class="portlet box red">
                        <div class="portlet-title">
                            <div class="caption"><i class="icon-edit"></i>员工信息</div>
                            <div class="tools"><a href="javascript:;" class="collapse"></a></div>
                        </div>
                        <div class="portlet-body">
                            <div class="clearfix">
                                <div class="btn-group span12">
                                    <button id="btnAddStaff" href="#create_order" class="btn green" data-toggle="modal" style="margin:10px;">
                                        添加员工 <i class="icon-plus-sign"></i>
                                    </button>
                                    <button id="btnAddStaffByFile" class="btn green" >
                                        批量添加 <i class="icon-file"></i>
                                    </button>
                                    <button id="sample_editable_1_sync" class="btn green" style="margin:10px;">
                                        刷新数据 <i class="icon-refresh"></i>
                                    </button>

                                    <div id="create_order" class="modal hide fade" style="width: 800px;" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                        <div class="modal-header">
                                            <button type="button" class='close' data-dismiss="modal" aria-hidden="true"></button>
                                            <h3 id="myModalLabel">
                                                添加员工
                                            </h3>
                                        </div>
                                        <div class="modal-body">
                                            <div class="row-fluid">
                                                <div class="span8">
                                                    <div class="row-fluid">
                                                        <div class="span6">
                                                            <div>
                                                                <label>工号</label>
                                                                <div>
                                                                    <input id="staffWorkNum" type="text" pattern="[1-9][0-9]*" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="span6">
                                                            <label >姓名</label>
                                                            <div>
                                                                <input id="staffName" type="text" pattern="[1-9][0-9]*" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row-fluid">
                                                        <div class="span6">
                                                            <label>年龄</label>
                                                            <div>
                                                                <input id="staffAge" type="text" pattern="[1-9][0-9]*" />
                                                            </div>
                                                        </div>
                                                        <div class="span6">
                                                            <label>性别</label>
                                                            <div>
                                                                <select id="staffSex" class="form-control">
                                                                    <option value="male">男</option>
                                                                    <option value="female">女</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row-fluid">
                                                        <div class="span6">
                                                            <label>手机</label>
                                                            <div>
                                                                <input id="staffPhoneNum" type="text" pattern="[1-9][0-9]*" />
                                                            </div>
                                                            </div>
                                                        <div class="span6">
                                                                <label>班次</label>
                                                                <div>
                                                                    <select id="staffWorkTime" class="form-control">
                                                                        <option value="1">00:00--02:00</option>
                                                                        <option value="2">02:00--04:00</option>
                                                                        <option value="3">04:00--06:00</option>
                                                                        <option value="4">06:00--08:00</option>
                                                                        <option value="5">08:00--10:00</option>
                                                                        <option value="6">10:00--12:00</option>
                                                                        <option value="7">12:00--14:00</option>
                                                                        <option value="8">14:00--16:00</option>
                                                                        <option value="9">16:00--18:00</option>
                                                                        <option value="10">18:00--20:00</option>
                                                                        <option value="11">20:00--22:00</option>
                                                                        <option value="12">22:00--24:00</option>
                                                                    </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row-fluid">
                                                        <div class="span6">
                                                            <label>部门</label>
                                                            <div>
                                                                <input id="staffDepartment" type="text" pattern="[1-9][0-9]*" />
                                                            </div>
                                                        </div>
                                                        <div class="span6">
                                                            <label>组别</label>
                                                            <div>
                                                                <input id="staffClasses" type="text" pattern="[1-9][0-9]*" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row-fluid">
                                                        <div class="span12">
                                                        <label>地址</label>
                                                        <div>
                                                            <input id="staffAddress" type="text" class="span12" style="width: 96%"/>
                                                        </div>
                                                    </div>
                                                    </div>
                                                </div>
                                                <div class="span4">
                                                    <div class="fileupload fileupload-new" data-provides="fileupload">
                                                        <div class="fileupload-new thumbnail" style="width: 210px; height: 260px;">
                                                            <img src="media/image/user.png" alt="" />
                                                        </div>
                                                        <div class="fileupload-preview fileupload-exists thumbnail" style="max-width: 210px; max-height: 260px; line-height: 20px;"></div>
                                                        <div>
                                                                <span class="btn btn-file">
                                                                    <span class="fileupload-new " >选择图片</span>
                                                                    <span class="fileupload-exists">更换图片</span>
                                                                    <input id="file-4" type="file" class="default" /></span>
                                                            <a href="#" class="btn fileupload-exists" data-dismiss="fileupload" style="margin-left:15px ">
                                                                移除 <i class="icon-trash"></i></a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <hr>
                                            <div class="row-fluid">
                                                <div class="span9">
                                                    <div style="width:90%;height:350px;border:#ccc solid 1px;" id="allMap"></div>
                                                </div>
                                                <div class="span3">
                                                    <br/><br/><br/><br/><br/><br/><br/><br/><br/>
                                                    <div>
                                                        <label>经度</label>
                                                        <div>
                                                            <input id="posLng" type="text"  style="width:80%;"/>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <label>纬度</label>
                                                        <div>
                                                            <input id="posLat" type="text"  style="width:80%;"/>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button class="btn red" data-dismiss="modal">
                                                取消<i class="icon-remove"></i>
                                            </button>
                                            <button id="btnStaffInfoAdd" class="btn green" data-dismiss="modal" id="order_submit">
                                                提交<i class="icon-ok"></i>
                                            </button>
                                        </div>
                                </div>
                                <div class="btn-group pull-right">
                                    <button class="btn dropdown-toggle" data-toggle="dropdown">
                                        文件 <i class="icon-angle-down"></i>
                                    </button>
                                    <ul class="dropdown-menu pull-right">
                                        <li><a href="#"> 打印</a></li>
                                        <li><a href="#"> 保存为 PDF</a></li>
                                        <li><a href="#" onclick="getXlsFromTbl('sample_editable_1',null)"> 导出到 Excel</a></li>
                                    </ul>
                                </div>
                            </div>

                            <table class="table table-striped table-hover table-condensed" id="infoTable" width="100%">
                                <thead>
                                    <tr>
                                        <th width="6%">ID</th>
                                        <th width="10%">工号</th>
                                        <th width="6%">姓名</th>
                                        <th width="4%">性别</th>
                                        <th width="4%">年龄</th>
                                        <th width="10%">电话号码</th>
                                        <th width="10%">部门</th>
                                        <th width="5%">组别</th>
                                        <th width="8%">上班时间</th>
                                        <th width="25%">住址</th>

                                        <th>编辑</th>
                                        <th>删除</th>
                                    </tr>
                                </thead>
                                <tbody id="tableBody">

                                </tbody>
                            </table>
                            <input style="display:none" id="attri_value" value="12">
                        </div>
                    </div>
                </div>

            </div>
        </div>




    </div>
    <!-- END PAGE CONTAINER-->

</div>
<!-- END PAGE -->
<!-- END CONTAINER -->

<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
<!-- BEGIN CORE PLUGINS -->
<script src="media/js/jquery-1.10.1.min.js" type="text/javascript"></script>
<script src="media/js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>
<!-- IMPORTANT! Load jquery-ui-1.10.1.custom.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->
<script src="media/js/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>
<script src="media/js/bootstrap.min.js" type="text/javascript"></script>
<!--[if lt IE 9]>
<script src="media/js/excanvas.min.js"></script>
<script src="media/js/respond.min.js"></script>
<![endif]-->
<!-- BEGIN PAGE LEVEL PLUGINS -->
<script type="text/javascript" src="media/js/select2.min.js"></script>
<script type="text/javascript" src="media/js/jquery.dataTables.js"></script>
<script type="text/javascript" src="media/js/DT_bootstrap.js"></script>
<script src="media/js/table-editable.js"></script>
<script type="text/javascript" src="media/js/bootstrap-fileupload.js"></script>
<!-- END PAGE LEVEL PLUGINS -->
<script src="media/js/app.js"></script>

<!--导出为csv文件-->
<script src="media/js/toExcel.js"></script>
<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=A6kDPfPmpBybz3hNXK0SVXo4U2PApye4"></script>


<script type="text/javascript">
    $("#waiting").modal();
    function barChange(i){
        $("#waitBar").css('width', i+'%');
    }
    $(document).ready(function () {
        App.init();
        $("#waiting").modal();
        var infoTable = $("#infoTable").DataTable();
        infoTable.init();
        TableEditable.init();

        $.ajax({
            url: ip+'/StaffInfoManage'+ '/getAllStaff',
            type: 'post',
            data: null,
            dataType: 'json',
            success: function(staffList){

                for(var i=0;i<staffList.length;i++){
                    var temRate = parseInt((i+1)/staffList.length*100);
                    $("#waitBar").css('width', temRate+'%');
                    //$('#waitProgress').val(temRate);
                    //$("#waitProgress").progressbar({value: temRate});


                    var temArr = new Array();
                    temArr[0] = staffList[i].id;
                    temArr[2] = staffList[i].name;
                    temArr[3] = staffList[i].sex;
                    temArr[4] = staffList[i].age;
                    temArr[5] = staffList[i].phone;
                    temArr[6] = staffList[i].department;
                    temArr[9] = staffList[i].address;
                    temArr[7] = staffList[i].classes;
                    temArr[10] = "<a onclick=\"staffEdit("+staffList[i].id+")\">编辑</a>";
                    temArr[11] = "<a class=\"remove\">删除</a>";
                    infoTable.fnAddData(temArr);

                }
                $("#waitBar").css('width', '100%');
                $("#waiting").modal('hide');
            }
        });
    });
    $("#btnAddStaffByFile").click(function(){
       window.location.href = "staffAddFile.html";
    });

    var map = new BMap.Map("allMap", {enableMapClick: false});
    var point = new BMap.Point(121.48187, 31.240698); //中心点和经纬度

    map.centerAndZoom(point, 14);//数字越小，显示范围越大
    map.enableScrollWheelZoom();//启用滚轮效果


    var marker = new BMap.Marker(point);
    map.addOverlay(marker);
    marker.enableDragging();
    marker.addEventListener('dragging',function(){
        point = marker.getPosition();
        $("#posLng").val(point.lng);

        $("#posLat").val(point.lat);
    });
    $("#staffAddress").change(function(){
        console.log($(this).val());
        var myGeo = new BMap.Geocoder();
        myGeo.getPoint($(this).val(), function(point){
            if(point){
                map.centerAndZoom(point, 14);
                marker.setPosition(point);
                $("#posLng").val(point.lng);
                $("#posLat").val(point.lat);
            }
        })
    });

    function staffEdit(staffId){
        console.log(staffId);
    }
    $('#infoTable a.remove').live('click', function (e) {
        var infoTable=$('#infoTable').dataTable();
        var nRow = $(this).parents('tr')[0];
        var jqTds = $('>td', nRow);
        console.log(jqTds[0].innerHTML);
        infoTable.fnDeleteRow(nRow);
        $.ajax({
            url: ip+'/StaffInfoManage'+'/removeStaff',
            type: 'post',
            data: {
                staffId: jqTds[0].innerHTML
            },
            dataType: 'json',
            success: function(data){
                console.log(data);
            }
        });
    });
    function staffRemove(staffId){
        console.log('remove '+staffId);
        var index = 0;
        $("#infoTable").find("td").each(function(){
            console.log($(this));
        });
        var infoTable = $("#infoTable").DataTable();
        infoTable.fnDeleteRow(index);
        $.ajax({
            url: ip+'/StaffInfoManage'+'/removeStaff',
            type: 'post',
            data: {
                staffId: staffId
            },
            dataType: 'json',
            success: function(data){
                console.log(data);
            }
        });
    }
    $("#btnStaffInfoAdd").click(function(){
        var temStaff = {};
        console.log('ready to add');
        temStaff.job_number = $("#staffWorkNum").val();
        temStaff.name = $("#staffName").val();
        temStaff.age = $("#staffAge").val();
        temStaff.sex = $("#staffSex").children("option:selected").val();
        temStaff.address = $("#staffAddress").val();
        temStaff.posx = $("#posLng").val();
        temStaff.posy = $("#posLat").val();
        temStaff.work_time = $("#staffWorkTime").children("option:selected").val();
        temStaff.classes = $("#staffClasses").val();
        temStaff.department = $("#staffDepartment").val();
        temStaff.phone = $("#staffPhoneNum").val();
        console.log(temStaff);

        $.ajax({
            url: ip+'/StaffInfoManage'+'/addStaff',
            type: 'post',
            data: {
                staffInfo: temStaff
            },
            dataType: 'json',
            success: function(data){
                var temArr = new Array();
                var infoTable = $("#infoTable").DataTable();
                temArr[0] = data.id;
                temArr[1] = temStaff.name;
                temArr[2] = temStaff.sex;
                temArr[3] = temStaff.age;
                temArr[4] = temStaff.phone;
                temArr[5] = temStaff.department;
                temArr[6] = temStaff.address;
                temArr[7] = temStaff.classes;
                temArr[8] = "<a onclick=\"staffEdit(1)\">编辑</a>";
                temArr[9] = "<a onclick=\"staffRemove(1)\">删除</a>";
                infoTable.fnAddData(temArr);
            }
        });
    });
    $("#btnAddStaff").click(function(){
        var temTable = $("#infoTable").DataTable();
    });
</script>
</body>
</html>
